!function(){var e=document.createElement("style");e.innerHTML=".zfile-admin-down-link[data-v-397bd5eb] .el-select-dropdown__item{padding-right:15px}.zfile-admin-down-link[data-v-397bd5eb] .el-dialog__header{text-align:center}.zfile-admin-down-link[data-v-397bd5eb] .el-dialog__body{height:80vh;overflow-y:auto}\n",document.head.appendChild(e),System.register(["./base-legacy.300d11a2.js","./card-legacy.538a9fa4.js","./zh-cn-legacy.a3554e86.js","./input-legacy.1469b40d.js","./tag-legacy.b431dc88.js","./select-legacy.e4372bb7.js","./scrollbar-legacy.10f570c8.js","./popper-legacy.0e5cbcae.js","./checkbox-legacy.9507af63.js","./tooltip-legacy.f5af8fcd.js","./popover-legacy.0804fd9b.js","./SvgIcon-legacy.ec705426.js","./table-column-legacy.a41d2135.js","./form-item-legacy.4d5bc83f.js","./button-legacy.de6f77a5.js","./switch-legacy.80ed9f31.js","./useLinkSetting-legacy.c998a170.js","./admin-storage-legacy.9ba39bb1.js","./vue3-clipboard.esm-bundler-legacy.fd707006.js","./admin-setting-legacy.04cb307e.js","./route-block-legacy.2d113b05.js","./plugin-vue_export-helper-legacy.7bb61c33.js","./request-legacy.d578b778.js","./index-legacy.33440654.js","./index-legacy.bff7f3c4.js","./index-legacy.5c2a5b9a.js","./dayjs.min-legacy.564a4266.js","./index-legacy.4e6c4971.js","./index-legacy.8a2d13a7.js","./index-legacy.886e1b44.js","./event-legacy.0bfbd831.js","./debounce-legacy.63638c2f.js","./isEqual-legacy.746fcf44.js","./index-legacy.3903461f.js","./event-legacy.39ad8904.js","./scroll-legacy.37269264.js","./validator-legacy.82441049.js","./focus-trap-legacy.6b3273d9.js","./index-legacy.61ab75a6.js","./index-legacy.dcaeaefc.js"],(function(e){"use strict";var n,t,a,l,o,u,c,i,r,d,f,s,p,g,y,m,b,h,v,w,j,_,x,V,k,C,U,z,E,K,A,D,S,T,L,F,R,Y,H,I,M,q,J,N,P,W,B,G;return{setters:[function(e){n=e.aS,t=e.m,a=e.r},function(e){l=e.E},function(e){o=e.E,u=e.a,c=e.b,i=e.c,r=e.z,d=e.f,f=e.h,s=e.i},function(){},function(){},function(e){p=e.E,g=e.a},function(){},function(e){y=e.E},function(e){m=e.E,b=e.a},function(){},function(){},function(e){h=e._},function(){},function(e){v=e.E,w=e.a},function(){},function(e){j=e.E},function(e){_=e.u},function(e){x=e.l},function(e){V=e.t},function(e){k=e.l},function(e){C=e.b},function(e){U=e._},function(e){z=e.E},function(e){E=e.E},function(e){K=e.E},function(e){A=e.W,D=e.r,S=e.o,T=e.a,L=e.f,F=e.h,R=e.e,Y=e.p,H=e.u,I=e.k,M=e.S,q=e.F,J=e.y,N=e.b,P=e.t,W=e.U,B=e.V,G=e.J},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){}],execute:function(){var O=function(e){return W("data-v-397bd5eb"),e=e(),B(),e},Q={class:"zfile-admin-down-link"},X={class:"flex justify-between"},Z=O((function(){return Y("h3",{class:"text-lg leading-6 font-medium text-gray-900"}," 直链日志 ",-1)})),$={key:0,class:"flex space-x-1.5 justify-center items-center cursor-pointer"},ee=O((function(){return Y("span",{class:"text-gray-400 text-sm font-bold"},"记录下载日志：",-1)})),ne={class:"mt-4"},te={class:"flex justify-between space-x-20"},ae={class:"text-gray-400"},le=G("查询"),oe=G("批量删除"),ue={class:"space-x-2"},ce=G("删除"),ie={__name:"log",setup:function(e){var C=_(),U=C.data,W=C.saveData,B=(C.saveLoading,A({shortKey:"",storageKey:null,page:1,limit:10,path:"",ip:"",userAgent:"",referer:"",date:"",dateFrom:"",dateTo:"",total:0})),G=function(e){B.limit=e,B.page=1,re()},O=function(e){B.page=e,re()},ie=D(),re=function(){B.date instanceof Array?(B.dateFrom=B.date[0],B.dateTo=B.date[1]):(B.dateFrom="",B.dateTo=""),d(B).then((function(e){ie.value=e.data,B.total=e.dataCount}))};S((function(){re(),pe(),fe()}));var de=D(),fe=function(){k().then((function(e){de.value=e.data}))},se=D(),pe=function(){x().then((function(e){se.value=e.data}))},ge=D(),ye=function(){var e=ge.value.getSelectionRows();0!==e.length?E.confirm("是否确认删除？","提示",{type:"warning"}).then((function(){var n=e.map((function(e){return e.id}));s({ids:n}).then((function(e){z.success("删除成功"),re()}))})):z.warning("请至少选择一条数据")},me=function(e){V(e).then((function(){z.success("复制成功")}))},be=function(e){window.open("".concat(de.value.domain,"/s/").concat(e))};return function(e,d){var s=j,_=p,x=g,V=v,k=K,C=o,E=a,A=w,D=m,S=y,de=h,fe=u,pe=b,he=c,ve=i,we=l;return T(),L("div",Q,[F(we,null,{default:R((function(){return[Y("div",X,[Z,H(U)?(T(),L("div",$,[ee,F(s,{onChange:H(W),"active-text":"是","inline-prompt":"","inactive-text":"否",modelValue:H(U).recordDownloadLog,"onUpdate:modelValue":d[0]||(d[0]=function(e){return H(U).recordDownloadLog=e})},null,8,["onChange","modelValue"])])):I("",!0)]),Y("div",ne,[F(A,{inline:"",modelValue:B,"onUpdate:modelValue":d[8]||(d[8]=function(e){return M(B)?B.value=e:null})},{default:R((function(){return[F(V,{label:"存储源"},{default:R((function(){return[F(x,{clearable:"",teleported:!1,modelValue:B.storageKey,"onUpdate:modelValue":d[1]||(d[1]=function(e){return B.storageKey=e})},{default:R((function(){return[(T(!0),L(q,null,J(se.value,(function(e){return T(),N(_,{key:e.id,label:e.name,value:e.key},{default:R((function(){return[Y("div",te,[Y("span",null,P(e.name),1),Y("span",ae,P(e.type.description),1)])]})),_:2},1032,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),F(V,{label:"短链 Key"},{default:R((function(){return[F(k,{modelValue:B.shortKey,"onUpdate:modelValue":d[2]||(d[2]=function(e){return B.shortKey=e})},null,8,["modelValue"])]})),_:1}),F(V,{label:"文件名"},{default:R((function(){return[F(k,{modelValue:B.path,"onUpdate:modelValue":d[3]||(d[3]=function(e){return B.path=e})},null,8,["modelValue"])]})),_:1}),F(V,{label:"请求 IP"},{default:R((function(){return[F(k,{modelValue:B.ip,"onUpdate:modelValue":d[4]||(d[4]=function(e){return B.ip=e})},null,8,["modelValue"])]})),_:1}),F(V,{label:"UserAgent"},{default:R((function(){return[F(k,{modelValue:B.userAgent,"onUpdate:modelValue":d[5]||(d[5]=function(e){return B.userAgent=e})},null,8,["modelValue"])]})),_:1}),F(V,{label:"Referer"},{default:R((function(){return[F(k,{modelValue:B.referer,"onUpdate:modelValue":d[6]||(d[6]=function(e){return B.referer=e})},null,8,["modelValue"])]})),_:1}),F(V,{label:"创建时间"},{default:R((function(){return[F(C,{modelValue:B.date,"onUpdate:modelValue":d[7]||(d[7]=function(e){return B.date=e}),type:"daterange","value-format":"YYYY-MM-DD HH:mm:ss","default-time":[new Date(2e3,1,1,0,0,0),new Date(2e3,2,1,23,59,59)],"range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间"},null,8,["modelValue","default-time"])]})),_:1}),F(V,null,{default:R((function(){return[F(E,{type:"primary",icon:H(n),onClick:re},{default:R((function(){return[le]})),_:1},8,["icon"])]})),_:1})]})),_:1},8,["modelValue"]),Y("div",null,[F(E,{onClick:ye,icon:H(t),type:"danger"},{default:R((function(){return[oe]})),_:1},8,["icon"])]),F(pe,{ref_key:"linkTableRef",ref:ge,size:"large",data:ie.value},{default:R((function(){return[F(D,{type:"selection",width:"55"}),F(D,{width:"120",label:"存储源名称"},{default:R((function(e){var n;return[F(S,{content:null===(n=e.row.storageType)||void 0===n?void 0:n.description,placement:"right"},{default:R((function(){return[Y("span",null,P(e.row.storageName),1)]})),_:2},1032,["content"])]})),_:1}),F(D,{"show-tooltip-when-overflow":"",prop:"shortKey",label:"短链 key"},{default:R((function(e){return[Y("div",ue,[Y("span",null,P(e.row.shortKey),1),F(de,{onClick:function(n){return H(me)(e.row.shortKey)},class:"inline cursor-pointer",name:"copy"},null,8,["onClick"]),F(de,{onClick:function(n){return H(be)(e.row.shortKey)},class:"inline cursor-pointer text-blue-500 text-sm",name:"target"},null,8,["onClick"])])]})),_:1}),F(D,{"show-tooltip-when-overflow":"",prop:"path",label:"路径"}),F(D,{width:"100","show-tooltip-when-overflow":"",prop:"ip",label:"请求 ip"}),F(D,{width:"180","show-tooltip-when-overflow":"",prop:"userAgent",label:"UserAgent"}),F(D,{width:"150","show-tooltip-when-overflow":"",prop:"referer",label:"Referer"}),F(D,{width:"180",prop:"createTime",label:"创建时间"}),F(D,{width:"120",label:"操作"},{default:R((function(e){return[F(fe,{title:"是否确认删除?",onConfirm:function(n){return t=e.row.id,void f(t).then((function(e){z.success("删除成功"),re()}));var t}},{reference:R((function(){return[F(E,{icon:H(t),type:"danger"},{default:R((function(){return[ce]})),_:1},8,["icon"])]})),_:2},1032,["onConfirm"])]})),_:1})]})),_:1},8,["data"]),F(ve,{locale:H(r)},{default:R((function(){return[F(he,{class:"mt-3","page-size":B.limit,background:"",layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:O,onSizeChange:G,"current-page":B.page,"onUpdate:current-page":d[9]||(d[9]=function(e){return B.page=e}),"default-current-page":10,"page-sizes":[10,50,100,200,1e3,99999999],total:B.total},null,8,["page-size","current-page","total"])]})),_:1},8,["locale"])])]})),_:1})])}}};"function"==typeof C&&C(ie);e("default",U(ie,[["__scopeId","data-v-397bd5eb"]]))}}}))}();
